<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer Manager</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
          integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
<div id="main-content" class="container">
    <div class="row">
        <div class="col-md-12">
            <!--/*@thymesVar id="word" type="ru.test.dictionaries.viewentities.Word"*/-->
            <form method="post" th:action="@{/}+${action}">
                <table class="table table-striped justify-content-between">
                    <thead>
                    <tr>
                        <th scope="col">Foreign words</th>
                        <th scope="col">Translations</th>
                    </tr>
                    </thead>
                    <tbody id="table">
                    <tr>
                        <td id="foreign" style="vertical-align : middle;" th:rowspan="${word.getTranslations().size()}">
                            <input class="align-self-center" name="foreign" th:placeholder="${word.getForeign()}"
                                   type="text"/>
                        </td>
                        <td>
                            <input th:name="|translations[0]|"
                                   th:placeholder="${word.getTranslations().get(0)}"
                                   type="text"/>
                        </td>
                    </tr>
                    <tr th:each="translation, stat:${word.getTranslations()}" th:if="${!stat.first}">
                        <td>
                            <input th:name="|translations[${stat.index}]|"
                                   th:placeholder="${translation}"
                                   type="text"/>
                        </td>
                    </tr>
                    </tbody>
                </table>

                <input name="type" th:value="${word.getType()}" type="hidden">
                <input class="btn btn-light edit m-2" type="submit" value="Save"/>
                <button class="btn btn-light edit m-2" id="add" type="button"> Add translation</button>
            </form>
        </div>
    </div>
</div>

<script crossorigin="anonymous"
        src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

<script th:inline="javascript">
    /*<![CDATA[*/

    var translationsCount = /*[[${word.getTranslations().size()}]]*/ 1;
    console.log(translationsCount);

    /*]]>*/
    $(document).ready(function () {

        $("#add").click(
            function () {
                console.log("Add new translation #" + translationsCount);
                $("#table").append("<tr><td><input type=\"text\" placeholder=\"New translation\" name=\"translations[" + translationsCount + "]\"></td></tr>");
                translationsCount += 1;
                $("#foreign").attr("rowspan", translationsCount);
            }
        );
    });
</script>

</body>

</html>